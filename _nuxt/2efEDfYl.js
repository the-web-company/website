import{_ as N}from"./DSD9rfD-.js";import{d as z,c as n,e as r,f as t,t as a,h as f,B as b,r as x,C as k,D as l,F as j,E as V,g as A,G as E,n as F}from"./BobeS8Yo.js";import{u as I}from"./DCPbePwr.js";import{q as m}from"./BHAmgyRm.js";import{_ as B}from"./DTnRtfJK.js";import"./DBluRaLs.js";import"./CpXkDKLs.js";import"./CaBkZ5iD.js";import"./DlAUqK2U.js";import"./Deb7XsSN.js";import"./Bw32PBTG.js";import"./DYLm77R1.js";const O={class:"flex flex-col-reverse justify-between sm:flex-row gap-2 sm:gap-8"},U={class:"flex flex-col justify-between sm:w-1/2"},G={class:"flex justify-between items-center gap-x-4 text-sm"},H={class:"capitalize rounded-md text-nowrap text-xs bg-gray-200 px-2 py-1.5 text-gray-500 hover:bg-gray-300"},L=["datetime"],R={class:"mt-4 text-lg font-semibold group-hover:text-gray-500"},J=["href"],K={class:"mt-2 text-sm text-gray-500 line-clamp-5"},M={class:"mt-5 flex border-t border-gray-300 pt-5"},Q={class:"sm:w-1/2"},T=["href"],W=["src"],X=z({__name:"DlHighlight",props:{post:{type:Object,required:!0}},setup(o){return(s,i)=>(n(),r("article",O,[t("div",U,[t("div",null,[t("div",G,[t("button",H,a(o.post.category),1),t("time",{datetime:o.post.pubDate,class:"text-gray-500 text-nowrap"},a(new Date(o.post.pubDate).toDateString()),9,L)]),t("h3",R,[t("a",{href:o.post._path},a(o.post.title),9,J)]),t("p",K,a(o.post.description),1)]),t("div",M,[f(B,{post:o.post},null,8,["post"])])]),t("div",Q,[t("a",{href:o.post._path},[t("img",{src:o.post.featuredImage,alt:"post featured image",class:"w-full rounded-md object-cover h-80"},null,8,W)],8,T)])]))}}),Y={class:"max-w-screen-2xl mx-auto px-4 3xl:px-0 py-14"},Z={class:"text-3xl sm:text-4xl xl:text-5xl"},tt={class:"mt-2 text-lg text-gray-500"},et={key:0,class:"mt-4"},st={class:"flex gap-4"},at=["onClick"],ot={class:"my-10 bg-gray-100 rounded-md p-2"},lt={class:"grid grid-cols-1 xl:grid-cols-2 gap-x-8 gap-y-10 sm:gap-y-20"},it=["href"],nt=["src"],rt={class:"sm:col-span-2 h-full max-h-80 flex flex-col justify-between space-y-5"},ct={class:"flex justify-between items-center gap-x-4 text-sm"},dt=["onClick"],ut=["datetime"],mt=["href"],pt={class:"mt-4 text-lg font-semibold"},_t={class:"mt-2 text-sm text-gray-500 line-clamp-5"},gt={class:"flex border-t border-gray-300 pt-5"},ht={class:"flex justify-center mt-20"},p=10,zt=z({__name:"blog",async setup(o){let s,i;const{data:w}=([s,i]=b(()=>I("blog",()=>m("/blog").findOne())),s=await s,i(),s),c=x(1),_=x(!1),d=x("all"),P=([s,i]=b(()=>m("/posts").count()),s=await s,i(),s),$=[...new Set(([s,i]=b(()=>m("/posts").where({published:!0}).find()),s=await s,i(),s).map(g=>g.category))].sort((g,h)=>g.localeCompare(h));$.unshift("all");let u=x([]);y(),k(c,()=>{y()});async function y(){_.value=!0,u.value=await m("/posts").where({published:!0}).sort({pubDate:-1}).skip((c.value-1)*p).limit(p).find(),_.value=!1}return k(d,async()=>{if(_.value=!0,d.value=="all")return y();u.value=await m("/posts").where({category:{$match:d.value},published:!0}).sort({pubDate:-1}).skip((c.value-1)*p).limit(p).find(),_.value=!1}),(g,h)=>{var D,C;const S=N;return n(),r("div",Y,[t("div",null,[t("h2",Z,a((D=l(w))==null?void 0:D.title),1),t("p",tt,a((C=l(w))==null?void 0:C.subtitle),1)]),l(u).length?(n(),r("div",et,[t("div",st,[(n(!0),r(j,null,V(l($),(e,v)=>(n(),r("div",{key:v},[t("button",{class:F([l(d)==e?"bg-gray-200":"","capitalize rounded-md text-nowrap text-xs bg-gray-100 px-2 py-1.5 text-gray-500 hover:bg-gray-200"]),onClick:q=>d.value=e},a(e),11,at)]))),128))]),t("div",ot,[f(X,{post:l(u)[0]},null,8,["post"])]),t("div",lt,[(n(!0),r(j,null,V(l(u).slice(1),(e,v)=>(n(),r("article",{class:"grid grid-col-1 sm:grid-cols-3 gap-2 sm:gap-8",key:v},[t("a",{href:e._path},[t("img",{src:e.featuredImage,alt:"post featured image",class:"h-80 w-full rounded-md object-cover"},null,8,nt)],8,it),t("div",rt,[t("div",null,[t("div",ct,[t("button",{onClick:q=>d.value=e.category,class:"capitalize rounded-md text-nowrap text-xs bg-gray-100 px-2 py-1.5 text-gray-500 hover:bg-gray-200"},a(e.category),9,dt),t("time",{datetime:e.pubDate,class:"text-gray-500 text-nowrap"},a(new Date(e.pubDate).toDateString()),9,ut)]),t("a",{href:e._path},[t("h3",pt,a(e.title),1)],8,mt),t("p",_t,a(e.description),1)]),t("div",gt,[f(B,{post:e},null,8,["post"])])])]))),128))])])):A("",!0),t("div",ht,[f(S,{modelValue:l(c),"onUpdate:modelValue":h[0]||(h[0]=e=>E(c)?c.value=e:null),"page-count":p,total:l(P)},null,8,["modelValue","total"])])])}}});export{zt as default};
