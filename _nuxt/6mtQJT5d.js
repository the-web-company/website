import{_ as N}from"./Cytl8RUn.js";import{u as A}from"./B9gj3h2C.js";import{q as m}from"./aQJHqwiJ.js";import{_ as V}from"./2xtRH5S-.js";import{d as z,c as n,e as r,f as t,t as a,h,B as y,r as g,C,D as l,F as k,E as j,g as E,G as F,n as I}from"./med3jWwT.js";import"./CnSCpv_C.js";import"./GuaECmsH.js";import"./BeamDRf9.js";import"./CAZilBRX.js";import"./DlAUqK2U.js";import"./B196apd6.js";import"./DBtHyjjS.js";const O={class:"flex flex-col-reverse justify-between sm:flex-row gap-2 sm:gap-8"},U={class:"flex flex-col justify-between sm:w-1/2"},G={class:"flex justify-between items-center gap-x-4 text-sm"},H={class:"capitalize rounded-md text-nowrap text-xs bg-gray-200 px-2 py-1.5 text-gray-500 hover:bg-gray-300"},L=["datetime"],R={class:"mt-4 text-lg font-semibold group-hover:text-gray-500"},J=["href"],K={class:"mt-2 text-sm text-gray-500 line-clamp-5"},M={class:"mt-5 flex border-t border-gray-300 pt-5"},Q={class:"sm:w-1/2"},T=["href"],W=["src"],X=z({__name:"DlHighlight",props:{post:{type:Object,required:!0}},setup(o){return(s,i)=>(n(),r("article",O,[t("div",U,[t("div",null,[t("div",G,[t("button",H,a(o.post.category),1),t("time",{datetime:o.post.pubDate,class:"text-gray-500 text-nowrap"},a(new Date(o.post.pubDate).toDateString()),9,L)]),t("h3",R,[t("a",{href:o.post._path},a(o.post.title),9,J)]),t("p",K,a(o.post.description),1)]),t("div",M,[h(V,{post:o.post},null,8,["post"])])]),t("div",Q,[t("a",{href:o.post._path},[t("img",{src:o.post.featuredImage,alt:"post featured image",class:"w-full rounded-md object-cover h-80"},null,8,W)],8,T)])]))}}),Y={class:"max-w-screen-2xl mx-auto px-4 3xl:px-0 py-14"},Z={class:"text-3xl sm:text-4xl xl:text-5xl"},tt={class:"mt-2 text-lg text-gray-500"},et={key:0,class:"mt-4"},st={class:"flex gap-4"},at=["onClick"],ot={class:"my-10 bg-gray-100 rounded-md p-2"},lt={class:"grid grid-cols-1 xl:grid-cols-2 gap-x-8 gap-y-10 sm:gap-y-20"},it=["href"],nt=["src"],rt={class:"sm:col-span-2 h-full max-h-80 flex flex-col justify-between space-y-5"},ct={class:"flex justify-between items-center gap-x-4 text-sm"},dt=["onClick"],ut=["datetime"],mt=["href"],pt={class:"mt-4 text-lg font-semibold"},_t={class:"mt-2 text-sm text-gray-500 line-clamp-5"},gt={class:"flex border-t border-gray-300 pt-5"},ht={class:"flex justify-center mt-20"},p=10,zt=z({__name:"blog",async setup(o){let s,i;const{data:v}=([s,i]=y(()=>A("blog",()=>m("/blog").findOne())),s=await s,i(),s),c=g(1),_=g(!1),d=g("all"),B=([s,i]=y(()=>m("/posts").count()),s=await s,i(),s),P=new Set(([s,i]=y(()=>m("/posts").where({published:!0}).find()),s=await s,i(),s).map(b=>b.category));let u=g([]);x(),C(c,()=>{x()});async function x(){_.value=!0,u.value=await m("/posts").where({published:!0}).sort({pubDate:-1}).skip((c.value-1)*p).limit(p).find(),_.value=!1}return C(d,async()=>{if(_.value=!0,d.value=="all")return x();u.value=await m("/posts").where({category:{$match:d.value},published:!0}).sort({pubDate:-1}).skip((c.value-1)*p).limit(p).find(),_.value=!1}),(b,w)=>{var $,D;const S=N;return n(),r("div",Y,[t("div",null,[t("h2",Z,a(($=l(v))==null?void 0:$.title),1),t("p",tt,a((D=l(v))==null?void 0:D.subtitle),1)]),l(u).length?(n(),r("div",et,[t("div",st,[(n(!0),r(k,null,j(["all",...l(P)],(e,f)=>(n(),r("div",{key:f},[t("button",{class:I([l(d)==e?"bg-gray-100":"","capitalize rounded-md text-nowrap text-xs bg-gray-100 px-2 py-1.5 text-gray-500 hover:bg-gray-200"]),onClick:q=>d.value=e},a(e),11,at)]))),128))]),t("div",ot,[h(X,{post:l(u)[0]},null,8,["post"])]),t("div",lt,[(n(!0),r(k,null,j(l(u).slice(1),(e,f)=>(n(),r("article",{class:"grid grid-col-1 sm:grid-cols-3 gap-2 sm:gap-8",key:f},[t("a",{href:e._path},[t("img",{src:e.featuredImage,alt:"post featured image",class:"h-80 w-full rounded-md object-cover"},null,8,nt)],8,it),t("div",rt,[t("div",null,[t("div",ct,[t("button",{onClick:q=>d.value=e.category,class:"capitalize rounded-md text-nowrap text-xs bg-gray-100 px-2 py-1.5 text-gray-500 hover:bg-gray-200"},a(e.category),9,dt),t("time",{datetime:e.pubDate,class:"text-gray-500 text-nowrap"},a(new Date(e.pubDate).toDateString()),9,ut)]),t("a",{href:e._path},[t("h3",pt,a(e.title),1)],8,mt),t("p",_t,a(e.description),1)]),t("div",gt,[h(V,{post:e},null,8,["post"])])])]))),128))])])):E("",!0),t("div",ht,[h(S,{modelValue:l(c),"onUpdate:modelValue":w[0]||(w[0]=e=>F(c)?c.value=e:null),"page-count":p,total:l(B)},null,8,["modelValue","total"])])])}}});export{zt as default};
